<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Leaflet</title>
</head>
<body>
  <div id="map" style="width:100%;height:800px;"></div>

  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script>
    // 지도 객체 생성
    const map = L.map('map').setView([35.16073, 129.1688], 15);

    // 기본 지도 레이어 추가
    L.tileLayer('https://tiles.osm.kr/hot/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);

    // 클릭 이벤트 리스너 설정
    map.on('click', function (e) {
      // 클릭한 위치의 좌표를 추출합니다.
      const latlng = e.latlng;

      // 좌표 배열에 좌표를 추가합니다.
      polygonPoints.push(latlng);

      // 좌표 수가 6개 이상이면 영역을 생성합니다.
      if (polygonPoints.length >= 6) {
        // 좌표 배열을 사용하여 다각형을 생성합니다.
        const polygon = L.polygon(polygonPoints, {
          color: '',
          fillColor: 'green',
          fillOpacity: 0.3,
        }).addTo(map);

        // 마우스 클릭 위치를 기준으로 다각형의 경계를 설정합니다.
        polygon.setBounds(map.getBounds().pad(0.5));

        // 좌표 배열을 초기화합니다.
        polygonPoints = [];
      }
    });

    // 좌표 배열
    const polygonPoints = [];
  </script>
</body>
</html>